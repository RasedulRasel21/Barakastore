<!-- sections/testimonials.liquid -->

<!-- HTML Structure -->
<section class="testimonials-section">
  <div class="container">
    <div class="testimonials-header">
      <h2 class="testimonials-heading">{{ section.settings.heading }}</h2>
      <p class="testimonials-subheading">{{ section.settings.subheading }}</p>
    </div>
    
    <div class="testimonials-gallery">
      {% for block in section.blocks %}
        {% if block.type == 'image' %}
          <div class="testimonial-image" {{ block.shopify_attributes }}>
            {% if block.settings.image != blank %}
              <img src="{{ block.settings.image | img_url: 'master' }}" alt="Customer testimonial">
            {% else %}
              <div class="placeholder-image">
                {{ 'image' | placeholder_svg_tag }}
              </div>
            {% endif %}
          </div>
        {% endif %}
      {% endfor %}
    </div>

    {% for block in section.blocks %}
      {% if block.type == 'testimonial' %}
        <div class="featured-testimonial" {{ block.shopify_attributes }}>
          <div class="testimonial-card">
            <div class="testimonial-header">
              <div class="customer-photo">
                {% if block.settings.customer_photo != blank %}
                  <img src="{{ block.settings.customer_photo | img_url: 'master' }}" alt="{{ block.settings.customer_name }}">
                {% else %}
                  <div class="photo-placeholder">
                    <svg width="40" height="40" viewBox="0 0 24 24" fill="#999">
                      <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                    </svg>
                  </div>
                {% endif %}
              </div>
              <div class="customer-info">
                <div class="verified-badge">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="#ffc107">
                    <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/>
                  </svg>
                  <span>Verified Purchase</span>
                </div>
                <div class="quote-icon">"</div>
              </div>
            </div>
            
            <p class="testimonial-text">{{ block.settings.testimonial_text }}</p>
            
            <div class="testimonial-footer">
              <div class="customer-details">
                <p class="customer-name">{{ block.settings.customer_name }}</p>
                <p class="customer-location">{{ block.settings.customer_location }}</p>
                <p class="purchase-info">{{ block.settings.purchase_info }}</p>
              </div>
            </div>
          </div>
        </div>
      {% endif %}
    {% endfor %}
  </div>
</section>

<!-- CSS Styles -->
<style>
  .testimonials-section {
    background: {{ section.settings.background_color }};
    padding: 80px 20px;
  }

  .testimonials-section .container {
    max-width: 1300px;
    margin: 0 auto;
  }

  .testimonials-header {
    text-align: center;
    margin-bottom: 50px;
  }

  .testimonials-heading {
    font-size: 32px;
    font-weight: 700;
    color: #1a1a1a;
    margin-bottom: 10px;
  }

  .testimonials-subheading {
    font-size: 24px;
    font-weight: 600;
    color: #2d9ca5;
    text-decoration: underline;
  }

  .testimonials-gallery {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 15px;
    margin-bottom: 50px;
  }

  .testimonial-image {
    border-radius: 12px;
    overflow: hidden;
    aspect-ratio: 1;
  }

  .testimonial-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
  }

  .placeholder-image {
    width: 100%;
    height: 100%;
    background: #f0f0f0;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .featured-testimonial {
    max-width: 900px;
    margin: 0 auto;
  }

  .testimonial-card {
    background: white;
    padding: 40px;
    border-radius: 16px;
    box-shadow: 0 4px 16px rgba(0,0,0,0.1);
    margin-bottom: 30px;
  }

  .testimonial-header {
    display: flex;
    gap: 20px;
    margin-bottom: 25px;
  }

  .customer-photo {
    flex-shrink: 0;
    width: 80px;
    height: 80px;
    border-radius: 50%;
    overflow: hidden;
  }

  .customer-photo img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .photo-placeholder {
    width: 100%;
    height: 100%;
    background: #e0e0e0;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .customer-info {
    flex: 1;
  }

  .verified-badge {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 14px;
    font-weight: 600;
    color: #ffc107;
    margin-bottom: 10px;
  }

  .quote-icon {
    font-size: 60px;
    color: #e0e0e0;
    line-height: 1;
  }

  .testimonial-text {
    font-size: 16px;
    line-height: 1.7;
    color: #333;
    margin-bottom: 25px;
    font-style: italic;
  }

  .customer-name {
    font-size: 18px;
    font-weight: 700;
    color: #2d9ca5;
    margin-bottom: 5px;
  }

  .customer-location {
    font-size: 14px;
    color: #666;
    margin-bottom: 5px;
  }

  .purchase-info {
    font-size: 14px;
    color: #2d9ca5;
    font-weight: 600;
  }

  @media (max-width: 768px) {
    .testimonials-heading {
      font-size: 26px;
    }

    .testimonials-subheading {
      font-size: 20px;
    }

    .testimonials-gallery {
      grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
    }

    .testimonial-card {
      padding: 25px;
    }

    .testimonial-header {
      flex-direction: column;
    }
  }
</style>

<!-- Schema -->
{% schema %}
{
  "name": "Testimonials",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Real Users."
    },
    {
      "type": "text",
      "id": "subheading",
      "label": "Subheading",
      "default": "Real Life-Changing Results."
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background Color",
      "default": "#f8f8f8"
    }
  ],
  "blocks": [
    {
      "type": "image",
      "name": "Customer Photo",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Customer Photo"
        }
      ]
    },
    {
      "type": "testimonial",
      "name": "Featured Testimonial",
      "settings": [
        {
          "type": "image_picker",
          "id": "customer_photo",
          "label": "Customer Photo"
        },
        {
          "type": "textarea",
          "id": "testimonial_text",
          "label": "Testimonial Text",
          "default": "After using the Knee Relief Massager, my knee pain has significantly decreased, and I can walk much longer distances. It's a game-changer for me!"
        },
        {
          "type": "text",
          "id": "customer_name",
          "label": "Customer Name",
          "default": "James T."
        },
        {
          "type": "text",
          "id": "customer_location",
          "label": "Customer Location",
          "default": "Birmingham"
        },
        {
          "type": "text",
          "id": "purchase_info",
          "label": "Purchase Info",
          "default": "Purchased 1 pair"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Testimonials"
    }
  ]
}
{% endschema %}